# Godot Viewer (только просмотр)

Небольшой Godot 4 проект для просмотра поля боя и юнитов из `../state.json`.
В проекте **нет управления юнитами** — только визуализация.

## Что делает
- Читает `../state.json` и каждые 0.3 сек обновляет отображение.
- Рисует сетку, юнитов и цели.
- Поддерживает масштабирование колесом мыши.
- Горячая клавиша **R** — принудительная перезагрузка состояния.

## Требования
- Установленный **Godot 4.x** (любая свежая версия 4.x).

## Как запустить (пошагово)
1. Убедитесь, что файл `state.json` находится **рядом с папкой `godot_viewer`**.
   ```
   /workspace/40kAI/
     state.json
     godot_viewer/
   ```
2. Запустите Godot 4.
3. В окне Project Manager выберите **Import** и укажите путь:
   ```
   /workspace/40kAI/godot_viewer/project.godot
   ```
4. Откройте проект и нажмите **Play** (F5).
5. При изменении `state.json` окно обновится автоматически.

## Управление
- **Колесо мыши** — приближение/отдаление камеры.
- **R** — принудительная перезагрузка `state.json`.

## Описание формата данных (кратко)
- Размер сетки берётся из `data["board"]["rows"]` и `data["board"]["cols"]`.
  Если их нет — используется 20×20.
- Юниты ожидаются в `data["units"]`.
  Поддерживаются позиции:
  - `{"r": 1, "c": 2}` или `{"row": 1, "col": 2}`
  - `{"x": 2, "y": 1}`
  - `[2, 1]`
- Фракции:
  - `player` — синий квадрат
  - `model` — красный квадрат
  - другое — серый квадрат
- Цели: `data["objectives"]` — рисуются жёлтым кругом.

## Если не видно изменений
- Проверьте путь к `state.json` — он должен быть **на один уровень выше** папки `godot_viewer`.
- Откройте консоль Godot (Output) и посмотрите сообщения об ошибках.
