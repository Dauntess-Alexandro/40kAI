# 40kAI — AGENTS.md (инструкции для OpenAI Codex)

## README
- README в этом репозитории может быть устаревшим — **не полагайся на README как на источник истины**.
- Всегда сверяйся с **актуальным кодом** и реальными файлами в репо.

## Логи для отладки (LOGS_FOR_AGENTS.md)
- В корне проекта есть файл **LOGS_FOR_AGENTS.md** — это “источник правды” по тому, что реально происходило во время игры/GUI.
- При любом баге/неожиданном поведении:
  1) **сначала прочитай свежие строки** из `LOGS_FOR_AGENTS.md`,
  2) найди маркеры фаз/ходов/юнитов/ошибок,
  3) только потом предлагай правки.
- Если в логах есть признаки ошибки/варнингов/неконсистентности — укажи:
  - **что случилось**, **где** (файл/функция/строка), **что сделать дальше** (конкретные шаги).
- Не добавляй “тишину”: если что-то “пропущено/автоматически”, лог должен объяснять **почему** (например: нет целей, advance без assault, invalid target index, etc).
- Логи нужны для Codex: **не переписывай их формат без необходимости**, лучше добавляй новые строки аккуратно и явно.

## Язык и стиль
- Общение с пользователем и тексты в UI/логах: **русский язык**.
- Пиши кратко и по делу, но так, чтобы новичку было понятно.
- Сообщения об ошибках должны содержать: **что случилось + где + что сделать дальше**.
- Комментарии в коде: RU/EN допустимо, без лишней воды.

## Зависимости / библиотеки
- **Можно добавлять новые библиотеки**, если это действительно упрощает задачу или улучшает качество.
- При добавлении зависимости:
  - обновляй зависимости проекта (requirements/pyproject и т.п. — как принято в репо),
  - предпочитай популярные и стабильные библиотеки,
  - избегай тяжёлых зависимостей без необходимости.
  
## Платформа и актуальный GUI
- Основная разработка и тестирование сейчас ведутся **на Windows**.
- Мы работаем только с новым GUI: **Qt GUI (PySide6)**.
- В репозитории может быть старый GUI на **gtkmm** (или “старый gui”) — **его не трогаем**, не рефакторим, не чиним, не переносим стили.
- Все правки по интерфейсу, логам и UX делаем **только в Qt GUI**.


## Результаты треинровки (общее)
- **Можно смотреть results.txt 

## Формат всех правок (обязательно)

- Все изменения в коде должны оформляться как unified diff patch.
- Codex не должен редактировать файлы напрямую.
- Все правки всегда сохраняются в одном файле:

  1.patch  (в корне репозитория)

- В patch должны входить:
  - все изменённые файлы
  - новые файлы (через diff --git)
  - удалённые файлы при необходимости

- Patch должен быть готов к применению командой:

  git apply 1.patch

- Если patch не применяется чисто — это считается ошибкой.

