# üìå –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (–Ø–Ω–≤–∞—Ä—å 2026)

## üïπ –ì–µ–π–º–ø–ª–µ–π / –î–≤–∏–∂–æ–∫

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ—Ä–∞–∫—Ü–∏–∏ **Necrons**  
- –î–æ–±–∞–≤–ª–µ–Ω—ã —é–Ω–∏—Ç—ã **Necron Warriors (x10)**  
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ä—É–∂–∏—è, –µ—Å–ª–∏ –æ–Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π:
  - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–º—ë–Ω
  - —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ —Ç–∏–ø–∞ `[PISTOL]`
  - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π fallback –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∫—Ä–∞—à–µ–π
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö —é–Ω–∏—Ç–æ–≤  
  (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ `Weapons`)
- –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç —Ö–æ–¥–æ–≤ –∑–∞ —ç–ø–∏–∑–æ–¥: **5 ‚Üí 10**

---

## üé≤ –£–ª—É—á—à–µ–Ω–∏—è —Ä—É—á–Ω–æ–π –∏–≥—Ä—ã

- –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–∂–∏–º **MANUAL_DICE=1**  
  (–≤–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –±—Ä–æ—Å–∫–æ–≤ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –±–æ–µ–≤—ã–µ –ª–æ–≥–∏:
  - —Ö–∏—Ç—ã
  - –≤—É–Ω—ã
  - —Å–µ–π–≤—ã
  - —É—Ä–æ–Ω
- –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏:
  - —Ä—É—á–Ω—ã—Ö –∫—É–±–∞—Ö
  - `VERBOSE_LOGS=1`

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
  - **winrate**
  - **VP diff**
  - **–ø—Ä–∏—á–∏–Ω—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è –±–æ—è**
- –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫:
  - CSV-—Ñ–∞–π–ª—ã
  - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏

---

## üñ• GUI

- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—Ä–∞–∫—Ü–∏—è **Necrons**:
  - –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä Model
  - –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä Player
  - –≤ Army Viewer
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ radio-–∫–Ω–æ–ø–æ–∫  
  (Necrons –±–æ–ª—å—à–µ –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç Tau)

---

# üìÖ 19.01.26

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫—Ä—ç—à —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏:  
  `UnboundLocalError: idOfE` –≤ `warhamEnv.py::step()`  
  - —É–¥–∞–ª—ë–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –±–ª–æ–∫  
    ```python
    elif action["attack"] == 0
    ```
  - –±–ª–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `idOfE` –¥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ melee-–ª–æ–≥–≥–µ—Ä–∞:
  - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç —É—Ä–æ–Ω–∞ –∏–∑ `dmg_list` (numpy / tensor safe)
  - `invul <= 0` —Ç–µ–ø–µ—Ä—å –æ–∑–Ω–∞—á–∞–µ—Ç **–∏–Ω–≤—É–ª—ã –Ω–µ—Ç**

---

## ‚öî 10-—è —Ä–µ–¥–∞–∫—Ü–∏—è: Charge & Fight

- Charge phase –ø—Ä–∏–≤–µ–¥—ë–Ω –±–ª–∏–∂–µ –∫ –ø—Ä–∞–≤–∏–ª–∞–º:
  - **—á–∞—Ä–¥–∂ –Ω–µ –Ω–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω**
  - —Ç–æ–ª—å–∫–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç engagement
- Fight Phase —Ç–µ–ø–µ—Ä—å —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
  - –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ö–æ–¥–∞ –∏–≥—Ä–æ–∫–∞
  - melee —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - –ø–µ—á–∞—Ç–∞—é—Ç—Å—è –ª–æ–≥–∏ –±–æ—è
- –í Fight Phase:
  - –∏–≥—Ä–æ–∫ –∫–∏–¥–∞–µ—Ç –∫—É–±—ã –≤—Ä—É—á–Ω—É—é
  - –º–æ–¥–µ–ª—å –∫–∏–¥–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üêû UX / Debug

- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ charge –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:
  ```
  updateBoard()
  ```
- `board.txt` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å:
  - —é–Ω–∏—Ç—ã –≤ –±–æ—é
  - –∏–ª–∏ –Ω–µ—Ç

---

# üìÖ 18.01.26

## üéÆ –ì–µ–π–º–ø–ª–µ–π / –î–∞–Ω–Ω—ã–µ

- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—Ä–∞–∫—Ü–∏—è **Necrons**:
  - Royal Warden
  - Canoptek Scarab Swarms
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ä—É–∂–µ–π–Ω—ã–µ –∞–±–∏–ª–∫–∏:
  - **Lethal Hits**
  - **Rapid Fire**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ melee-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - —Ö–∏—Ç—ã
  - –≤—É–Ω—ã
  - —Å–µ–π–≤—ã
  - —É—Ä–æ–Ω

---

# üìÖ 20.01.26

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä **updates_per_step**  
  (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–ø–¥–µ–π—Ç–æ–≤ —Å–µ—Ç–∏ –Ω–∞ –æ–¥–∏–Ω —à–∞–≥ —Å—Ä–µ–¥—ã)
- –î–æ–±–∞–≤–ª–µ–Ω **warmup_steps**  
  (–æ–±—É—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è replay buffer)
- –°–∏–ª—å–Ω–æ —É–º–µ–Ω—å—à–µ–Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–∞ –æ—Ç —Ä–µ–Ω–¥–µ—Ä–∞:
  - –Ω–µ –∫–∞–∂–¥—ã–π —à–∞–≥
  - —Ç–æ–ª—å–∫–æ —Ä–∞–∑ –≤ N —à–∞–≥–æ–≤ –∏–ª–∏ –≤ –∫–æ–Ω—Ü–µ —ç–ø–∏–∑–æ–¥–∞

---

## üß† Action Space / –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω `action_space`:
  - –æ–±—ã—á–Ω—ã–π dict
  - –∑–∞—Ç–µ–º `spaces.Dict(...)`
- –≠—Ç–æ —É—Å—Ç—Ä–∞–Ω–∏–ª–æ:
  - –±–∏—Ç—ã–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
  - —Å–ª—É—á–∞–π–Ω—ã–µ –±–∞–≥–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ CPU ‚Üî GPU:
  - –≤—Å–µ —Ç–µ–Ω–∑–æ—Ä—ã —Ç–µ–ø–µ—Ä—å –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

---

## üéÆ Play / Runtime

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫—Ä–∞—à:
  ```
  NameError: enemyName is not defined
  ```
- –£–ª—É—á—à–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
  - MANUAL_DICE
  - VERBOSE_LOGS
- –õ–æ–≥–∏ –±–æ—è —Å—Ç–∞–ª–∏ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–µ–µ

---

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫:
  - –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞
  - –¥–ª—è gif
  - –¥–ª—è –º–µ—Ç—Ä–∏–∫
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∞—à–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- –ú–µ—Ç—Ä–∏–∫–∏ —Ç–µ–ø–µ—Ä—å:
  - —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ CSV
  - –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ GUI


---

# üöÄ –ë—ã—Å—Ç—Ä—ã–π GPU Training (RTX 16GB –∏ –≤—ã—à–µ)

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ (CUDA + AMP + –±–æ–ª—å—à–µ –∞–ø–¥–µ–π—Ç–æ–≤)

```bash
source .venv/bin/activate
export PYTHONPATH="$(pwd)/gym_mod:${PYTHONPATH:-}"
python -u train.py \
  --batch-size 2048 \
  --max-batch-size 4096 \
  --updates-per-step 8 \
  --warmup-steps 2000 \
  --replay-size 50000 \
  --amp \
  --double-dqn \
  --dueling \
  --per \
  --profile
```

## üìà –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–ª–∞–≥–∏

- `--profile` ‚Äî –ø–µ—á–∞—Ç—å throughput (fps, updates/s, samples/s) –∏ GPU –ø–∞–º—è—Ç–∏.
- `--amp/--no-amp` ‚Äî mixed precision (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á—ë–Ω –Ω–∞ CUDA).
- `--compile/--no-compile` ‚Äî `torch.compile` (–µ—Å–ª–∏ torch>=2.x).
- `--updates-per-step` ‚Äî –±–æ–ª—å—à–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–∞ –æ–¥–∏–Ω —à–∞–≥ —Å—Ä–µ–¥—ã.
- `--batch-size`, `--max-batch-size` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å VRAM.
- `--per` ‚Äî prioritized replay.
- `--dueling` ‚Äî dueling DQN.
- `--double-dqn/--no-double-dqn` ‚Äî Double DQN.
- `--eval-interval`, `--eval-episodes` ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –±–µ–∑ exploration.

## üîé –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–±—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ –Ω–∞ GPU

- –í –ª–æ–≥–∞—Ö —Å—Ç–∞—Ä—Ç–∞ –±—É–¥–µ—Ç:
  - `DEVICE CHECK: cuda: True`
  - `DEVICE CHECK: name: <GPU>`
  - `DEVICE CHECK: device: cuda`
- –í –ø—Ä–æ—Ñ–∞–π–ª–µ (`--profile`) –ø–µ—á–∞—Ç–∞—é—Ç—Å—è:
  - `fps`, `updates/s`, `samples/s`
  - `cuda mem alloc/reserved`

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫–∏:
```
[profile] fps=45.2 updates/s=160.5 samples/s=328704.0 avg_batch_time=0.0062s env%=21.5 upd%=78.5
[profile] cuda mem alloc=2048MB reserved=3072MB
```
